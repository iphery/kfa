(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{604:function(e,s,a){Promise.resolve().then(a.bind(a,668))},6981:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return n}});var t=a(7437);a(3257);var r=a(4606),d=a(7208),i=a(2265),l=a(6463);function n(){let e=(0,l.useRouter)(),[s,a]=(0,i.useState)({email:"",password:""}),[n,c]=(0,i.useState)([!1,!1]),[o,u]=(0,i.useState)(!1);return(0,t.jsx)("div",{className:"flex min-h-screen w-full items-center justify-center",children:(0,t.jsxs)("div",{className:"flex w-full flex-col p-2 sm:w-1/3",children:[(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)("h1",{className:"mb-3 font-bold",children:"BWF MAPPING"})}),(0,t.jsx)(r.i,{placeholder:"Email",input:s.email,onInputChange:e=>{a(s=>({...s,email:e}))},error:n[0],errorMessage:"Required",onChg:()=>{let e=[...n];e[0]=!1,c(e)}}),(0,t.jsx)("div",{className:"mb-3"}),(0,t.jsx)(r.i,{placeholder:"Password",type:"password",input:s.passsword,onInputChange:e=>{a(s=>({...s,password:e}))},error:n[1],errorMessage:"Required",onChg:()=>{let e=[...n];e[1]=!1,c(e)}}),(0,t.jsx)("div",{className:"mb-3"}),(0,t.jsx)(d.J,{label:"Login",onload:o,disabled:o,onClick:async e=>{e.preventDefault(),u(!0);let a=[!1,!1],t=[...n];if(""==s.email?(t[0]=!0,c(t),a[0]=!0):(t[0]=!1,c(t),a[0]=!1),""==s.password?(t[1]=!0,c(t),a[1]=!0):(t[1]=!1,c(t),a[1]=!1),!a.includes(!0)){console.log("ok");let e=await fetch("https://lime.farmaguru.id/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({data:s})});200==e.status&&0==(await e.json()).error&&window.location.reload()}u(!1)}}),(0,t.jsx)("div",{className:"mb-2"}),(0,t.jsxs)("div",{className:"text-center text-sm",children:["Don't have account ?"," ",(0,t.jsx)("span",{className:"cursor-default hover:text-strokedark",onClick:()=>{e.push("/signup")},children:"Register"})]})]})})}},668:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return h}});var t=a(7437);a(8472);var r=a(2265),d=a(1109);let i=e=>{let{isVisible:s,onClose:a,isSmallWidth:r,children:i}=e;return s?(0,t.jsx)("div",{className:"fixed inset-0 flex  items-center justify-center bg-black bg-opacity-25 backdrop-blur-sm",id:"wrapper",onClick:e=>{},children:(0,t.jsxs)("div",{className:"w-full ".concat("sm"==r?"sm:w-1/3":"sm:w-2/3"," px-5"),children:[(0,t.jsx)("div",{className:"flex justify-end p-1",children:(0,t.jsx)("div",{className:" justify center flex h-8 w-8 cursor-pointer items-center  rounded-full p-2 text-xl text-white hover:bg-primary hover:bg-opacity-20",onClick:()=>a(),children:(0,t.jsx)(d.e7E,{})})}),(0,t.jsx)("div",{className:"rounded-lg bg-white p-10",children:i})]})}):null};var l=a(4606),n=a(1942),c=a(7208);a(7138);var o=()=>(0,t.jsx)("div",{className:"sticky top-0 z-50 text-black",children:(0,t.jsx)("nav",{className:"bg-white p-2",children:(0,t.jsxs)("div",{className:"flex justify-between ",children:[(0,t.jsx)("h1",{children:"BWF - Mapping Data"}),(0,t.jsx)("div",{children:"Link"})]})})}),u=a(6981);function m(e){let{children:s}=e,[a,d]=(0,r.useState)(!0),i=async()=>{let e=await fetch("https://lime.farmaguru.id/protected",{method:"GET",credentials:"include"});200==e.status&&"Authorized"==(await e.json()).result?d(!0):d(!1)};return((0,r.useEffect)(()=>{i()},[]),a)?(0,t.jsx)("div",{children:s}):(0,t.jsx)(u.default,{})}function h(){let[e,s]=(0,r.useState)([]),[a,d]=(0,r.useState)(""),u=async()=>{let e=await fetch("https://lime.farmaguru.id/product",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(200==e.status){let a=await e.json();s(a.result),C(a.result),d(a.user),console.log(a.result)}},[h,x]=(0,r.useState)(!1),[p,f]=(0,r.useState)({}),[b,j]=(0,r.useState)({barcode:"",kfa:"",name:""}),[g,N]=(0,r.useState)([!1,!1,!1]),[v,w]=(0,r.useState)(!1),[k,y]=(0,r.useState)(""),[_,C]=(0,r.useState)([]);(0,r.useEffect)(()=>{u()},[]),(0,r.useEffect)(()=>{C(e.filter(e=>e.existing_name&&e.existing_name.toLowerCase().includes(k.toLowerCase())))},[k]);let S=e=>new Date(e).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1});return(0,t.jsx)(m,{children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("div",{className:"absolute  z-0 h-full w-full",children:[(0,t.jsx)(o,{}),(0,t.jsxs)("div",{className:"p-5",children:[(0,t.jsx)("div",{className:"w-full sm:w-96",children:(0,t.jsx)(l.i,{placeholder:"Search",input:k,onInputChange:e=>{y(e)}})}),(0,t.jsx)("div",{className:"mt-3 overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full ",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"",children:[(0,t.jsx)("th",{className:"border px-2",children:"No"}),(0,t.jsx)("th",{className:"border px-2",children:"Nama"}),(0,t.jsx)("th",{className:"border px-2",children:"Barcode"}),(0,t.jsx)("th",{className:"border px-2",children:"Kode KFA"}),(0,t.jsx)("th",{className:"border px-2",children:"Golongan"}),(0,t.jsx)("th",{className:"border px-2",children:"Updated By"}),(0,t.jsx)("th",{className:"border  px-2",children:"Updated At"}),(0,t.jsx)("th",{className:"border px-2",children:"Opsi"})]})}),(0,t.jsx)("tbody",{children:_.length>0&&_.map((e,s)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"border text-center",children:s+1}),(0,t.jsx)("td",{className:"border px-2",children:e.existing_name}),(0,t.jsx)("td",{className:"border px-2",children:e.barcode}),(0,t.jsx)("td",{className:"border px-2",children:e.id_kfa}),(0,t.jsx)("td",{className:"border px-2",children:e.type}),(0,t.jsx)("td",{className:"border px-2",children:e.username}),(0,t.jsx)("td",{className:"border px-2 text-sm",children:null==e.updated_at?"":S(e.updated_at)}),(0,t.jsx)("td",{className:"border ",children:null==e.updated_by||e.updated_by==a?(0,t.jsx)("div",{onClick:()=>{f({name:e.existing_name,barcode:e.barcode,kfa:null==e.id_kfa?"":e.id_kfa}),j(s=>({...s,id_product:e.id_product,name:e.existing_name,barcode:e.barcode,kfa:null==e.id_kfa?"":e.id_kfa})),x(!0)},className:"flex cursor-default justify-center hover:text-strokedark",children:(0,t.jsx)(n.ffH,{})}):(0,t.jsx)(t.Fragment,{})})]},s))})]})})]})]}),(0,t.jsxs)(i,{isVisible:h,isSmallWidth:"sm",onClose:()=>{N([!1,!1,!1]),x(!1)},children:[(0,t.jsx)("h1",{className:"mb-5 font-bold",children:"EDIT - ".concat(p.name)}),(0,t.jsx)("div",{className:"mb-1",children:"Nama"}),(0,t.jsx)(l.i,{input:b.name,onInputChange:e=>{j(s=>({...s,name:e}))},error:g[2],errorMessage:"Required",onChg:()=>{let e=[...g];e[2]=!1,N(e)}}),(0,t.jsx)("div",{className:"mb-1 mt-3",children:"Barcode"}),(0,t.jsx)(l.i,{input:b.barcode,onInputChange:e=>{j(s=>({...s,barcode:e}))},error:g[0],errorMessage:"Required",onChg:()=>{let e=[...g];e[0]=!1,N(e)}}),(0,t.jsx)("div",{className:"mb-1 mt-3",children:"Kode KFA"}),(0,t.jsx)(l.i,{input:b.kfa,onInputChange:e=>{j(s=>({...s,kfa:e}))},error:g[1],errorMessage:"Required",onChg:()=>{let e=[...g];e[1]=!1,N(e)}}),(0,t.jsx)("div",{className:"mb-5"}),(0,t.jsx)(c.J,{label:"Submit",onload:v,disabled:v,onClick:async e=>{e.preventDefault(),w(!0);let s=[...g];if(""==b.barcode?s[0]=!0:s[0]=!1,N(s),""==b.kfa?s[1]=!0:s[1]=!1,N(s),""==b.name?s[2]=!0:s[2]=!1,N(s),!s.includes(!0)){console.log(b);let e=await fetch("https://lime.farmaguru.id/productupdate",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({data:b,user:a})});if(200==e.status){let s=(await e.json()).result[0];console.log(s),C([..._].map(e=>e.id_product===s.id_product?{...e,existing_name:s.existing_name,barcode:s.barcode,id_kfa:s.id_kfa,username:s.username,updated_at:s.updated_at}:e)),x(!1)}}w(!1)}})]})]})})}},7208:function(e,s,a){"use strict";a.d(s,{J:function(){return r}});var t=a(7437);let r=e=>{let{label:s,onload:a,disabled:r,onClick:d}=e;return(0,t.jsx)("button",{onClick:d,className:"  w-full border border-strokedark bg-bodydark p-2 text-sm text-whiter shadow-md hover:bg-strokedark hover:text-whiter",disabled:r,children:a?(0,t.jsxs)("div",{className:"flex flex-row justify-center",children:[(0,t.jsx)("div",{className:"h-5 w-5 animate-spin rounded-full border-2 border-solid border-whiten border-t-transparent"}),(0,t.jsx)("div",{className:"pl-2 text-whiten",children:"Please wait.."})]}):s})}},4606:function(e,s,a){"use strict";a.d(s,{i:function(){return r}});var t=a(7437);let r=e=>{let{input:s,type:a,placeholder:r,error:d,errorMessage:i,onInputChange:l,onKeyChange:n,children:c,reference:o,isDisabled:u,onChg:m,isAutoFocus:h}=e;return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{value:s,type:a,ref:o,placeholder:r,disabled:u,autoFocus:h,onInput:e=>{l(e.target.value)},onKeyDown:n,onChange:m,className:"w-full border bg-white px-2  py-1 shadow-md outline-none transition ".concat(d?"border-red":"border-strokedark"," bg-transparent text-black focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary")}),d?(0,t.jsx)("span",{className:"mt-1 text-sm text-red",children:i}):(0,t.jsx)(t.Fragment,{})]})}}},function(e){e.O(0,[516,699,288,265,257,971,23,744],function(){return e(e.s=604)}),_N_E=e.O()}]);