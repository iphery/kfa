(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{604:function(e,a,s){Promise.resolve().then(s.bind(s,1944))},6981:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return d}});var t=s(7437);s(3257);var r=s(4606),l=s(7208),i=s(2265),n=s(6463);function d(){let e=(0,n.useRouter)(),[a,s]=(0,i.useState)({email:"",password:""}),[d,o]=(0,i.useState)([!1,!1]),[c,u]=(0,i.useState)(!1);return(0,t.jsx)("div",{className:"flex min-h-screen w-full items-center justify-center",children:(0,t.jsxs)("div",{className:"flex w-full flex-col p-2 sm:w-1/3",children:[(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)("h1",{className:"mb-3 font-bold",children:"BWF MAPPING"})}),(0,t.jsx)(r.i,{placeholder:"Email",input:a.email,onInputChange:e=>{s(a=>({...a,email:e}))},error:d[0],errorMessage:"Required",onChg:()=>{let e=[...d];e[0]=!1,o(e)}}),(0,t.jsx)("div",{className:"mb-3"}),(0,t.jsx)(r.i,{placeholder:"Password",type:"password",input:a.passsword,onInputChange:e=>{s(a=>({...a,password:e}))},error:d[1],errorMessage:"Required",onChg:()=>{let e=[...d];e[1]=!1,o(e)}}),(0,t.jsx)("div",{className:"mb-3"}),(0,t.jsx)(l.J,{label:"Login",onload:c,disabled:c,onClick:async e=>{e.preventDefault(),u(!0);let s=[!1,!1],t=[...d];if(""==a.email?(t[0]=!0,o(t),s[0]=!0):(t[0]=!1,o(t),s[0]=!1),""==a.password?(t[1]=!0,o(t),s[1]=!0):(t[1]=!1,o(t),s[1]=!1),!s.includes(!0)){console.log("ok");let e=await fetch("https://lime.farmaguru.id/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({data:a})});if(200==e.status){let a=await e.json();0==a.error?window.location.reload():alert(a.message)}else alert("Ups.. failed contacting server")}u(!1)}}),(0,t.jsx)("div",{className:"mb-2"}),(0,t.jsxs)("div",{className:"text-center text-sm",children:["Don't have account ?"," ",(0,t.jsx)("span",{className:"cursor-default hover:text-strokedark",onClick:()=>{e.push("/signup")},children:"Register"})]})]})})}},1944:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return N}});var t=s(7437);s(8472);var r=s(2265),l=s(1109);let i=e=>{let{isVisible:a,onClose:s,isSmallWidth:r,children:i}=e;return a?(0,t.jsx)("div",{className:"fixed inset-0 flex  items-center justify-center bg-black bg-opacity-25 backdrop-blur-sm",id:"wrapper",onClick:e=>{},children:(0,t.jsxs)("div",{className:"w-full ".concat("sm"==r?"sm:w-1/3":"sm:w-2/3"," px-5"),children:[(0,t.jsx)("div",{className:"flex justify-end p-1",children:(0,t.jsx)("div",{className:" justify center flex h-8 w-8 cursor-pointer items-center  rounded-full p-2 text-xl text-white hover:bg-primary hover:bg-opacity-20",onClick:()=>s(),children:(0,t.jsx)(l.e7E,{})})}),(0,t.jsx)("div",{className:"rounded-lg bg-white p-10",children:i})]})}):null};var n=s(4606),d=s(1942),o=s(7208);s(7138);var c=s(9824),u=s(5097),m=s(6463),x=()=>((0,m.useRouter)(),(0,t.jsx)("div",{className:"sticky top-0 z-50 text-black",children:(0,t.jsx)("nav",{className:"bg-white p-2",children:(0,t.jsxs)("div",{className:"flex justify-between ",children:[(0,t.jsx)("h1",{children:"BWF - Mapping Data"}),null!=localStorage.getItem("username")?(0,t.jsxs)("div",{className:"flex items-center justify-start",children:[(0,t.jsx)("div",{className:"text-primary",children:(0,t.jsx)(u.zZ9,{className:"h-6 w-6"})}),(0,t.jsx)("div",{className:"ml-1 text-sm text-primary",children:"".concat(localStorage.getItem("username"))}),(0,t.jsx)("div",{className:"ml-3  text-danger",onClick:async()=>{let e=await fetch("https://lime.farmaguru.id/logout",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});console.log(e.status),200==e.status?window.location.reload():alert("Logout failed")},children:(0,t.jsx)(c.WrC,{className:"h-6 w-6"})})]}):(0,t.jsx)(t.Fragment,{})]})})})),h=s(6981);function p(e){let{children:a}=e,[s,l]=(0,r.useState)(!0),i=async()=>{let e=await fetch("https://lime.farmaguru.id/protected",{method:"GET",credentials:"include"});if(200==e.status){let a=await e.json();"Authorized"==a.result?(l(!0),console.log(a.username),localStorage.setItem("username",a.username)):l(!1)}else l(!1)};return((0,r.useEffect)(()=>{i()},[]),s)?(0,t.jsx)("div",{children:a}):(0,t.jsx)(h.default,{})}var b=s(4390),j=s(832);let f=e=>(0,t.jsx)(b.c.Option,{...e,children:(0,t.jsx)("div",{className:"text-strokedark",children:(0,t.jsx)("div",{className:"",children:e.data.label})})}),g=e=>(0,t.jsx)(b.c.Option,{...e,children:(0,t.jsxs)("div",{className:"text-strokedark",children:[(0,t.jsx)("div",{className:"",children:e.data.label}),(0,t.jsx)("div",{className:"text-sm",children:e.data.title})]})}),v=e=>{let{optionData:a,placeholder:s,setValue:r,onSelected:l,error:i,errorMessage:n,mode:d,onChg:o}=e;return(0,t.jsxs)("div",{children:[(0,t.jsx)(j.ZP,{styles:{control:(e,a)=>({...e,borderColor:a.isFocused?"#3C50E0":"#2E3A47",borderRadius:"2px",backgroundColor:"white",boxShadow:a.isFocused?"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)":"none","&:hover":{borderColor:"#3C50E0"}}),menu:e=>({...e,backgroundColor:"white"}),option:(e,a)=>{let{isFocused:s,isSelected:t}=a;return{...e,backgroundColor:s?"#80CAEE":"transparent"}}},onChange:e=>{l(e)},value:r,isSearchable:!0,isClearable:!0,options:a,placeholder:s,components:{Option:0==d?f:g}}),i?(0,t.jsx)("span",{className:"mt-1 text-sm text-red",children:n}):(0,t.jsx)(t.Fragment,{})]})};function N(){let[e,a]=(0,r.useState)([]),[s,l]=(0,r.useState)(""),[c,u]=(0,r.useState)([]),m=async()=>{let e=await fetch("https://lime.farmaguru.id/product",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(200==e.status){let s=await e.json();a(s.result),O(s.result),l(s.user),console.log(s.category),console.log(s.result);let t=s.category,r=[];t.map(e=>{r.push({label:e.description,value:e.id_category})}),u(r)}},[h,b]=(0,r.useState)(!1),[j,f]=(0,r.useState)({}),[g,N]=(0,r.useState)({label:"",value:""}),[w,y]=(0,r.useState)({barcode:"",kfa:"",name:"",type:""}),[k,C]=(0,r.useState)([!1,!1,!1]),[_,S]=(0,r.useState)(!1),[E,I]=(0,r.useState)(""),[F,O]=(0,r.useState)([]);(0,r.useEffect)(()=>{m()},[]),(0,r.useEffect)(()=>{O(e.filter(e=>e.existing_name&&e.existing_name.toLowerCase().includes(E.toLowerCase())))},[E]);let T=e=>new Date(e).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1});return(0,t.jsx)(p,{children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("div",{className:"absolute  z-0 h-full w-full",children:[(0,t.jsx)(x,{}),(0,t.jsxs)("div",{className:"p-5",children:[(0,t.jsx)("div",{className:"w-full sm:w-96",children:(0,t.jsx)(n.i,{placeholder:"Search",input:E,onInputChange:e=>{I(e)}})}),(0,t.jsx)("div",{className:"mt-3 overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full ",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"",children:[(0,t.jsx)("th",{className:"border px-2",children:"No"}),(0,t.jsx)("th",{className:"border px-2",children:"Nama"}),(0,t.jsx)("th",{className:"border px-2",children:"Barcode"}),(0,t.jsx)("th",{className:"border px-2",children:"Kode KFA"}),(0,t.jsx)("th",{className:"border px-2",children:"Kategori"}),(0,t.jsx)("th",{className:"border px-2",children:"Updated By"}),(0,t.jsx)("th",{className:"border  px-2",children:"Updated At"}),(0,t.jsx)("th",{className:"border px-2",children:"Opsi"})]})}),(0,t.jsx)("tbody",{children:F.length>0&&F.map((e,a)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"border text-center",children:a+1}),(0,t.jsx)("td",{className:"border px-2",children:e.existing_name}),(0,t.jsx)("td",{className:"border px-2",children:e.barcode}),(0,t.jsx)("td",{className:"border px-2",children:e.id_kfa}),(0,t.jsx)("td",{className:"border px-2",children:e.category}),(0,t.jsx)("td",{className:"border px-2",children:e.username}),(0,t.jsx)("td",{className:"border px-2 text-sm",children:null==e.updated_at?"":T(e.updated_at)}),(0,t.jsx)("td",{className:"border ",children:null==e.updated_by||e.updated_by==s?(0,t.jsx)("div",{onClick:()=>{f({name:e.existing_name,barcode:e.barcode,kfa:null==e.id_kfa?"":e.id_kfa,type:e.type}),y(a=>({...a,id_product:e.id_product,name:e.existing_name,barcode:e.barcode,kfa:null==e.id_kfa?"":e.id_kfa,category:e.category})),N(a=>({...a,label:e.category,value:e.id_category})),console.log(e.category),console.log(e.id_category),console.log(g),b(!0)},className:"flex cursor-default justify-center hover:text-strokedark",children:(0,t.jsx)(d.ffH,{})}):(0,t.jsx)(t.Fragment,{})})]},a))})]})})]})]}),(0,t.jsxs)(i,{isVisible:h,isSmallWidth:"sm",onClose:()=>{C([!1,!1,!1]),b(!1)},children:[(0,t.jsx)("h1",{className:"mb-5 font-bold",children:"EDIT - ".concat(j.name)}),(0,t.jsx)("div",{className:"mb-1",children:"Nama"}),(0,t.jsx)(n.i,{input:w.name,onInputChange:e=>{y(a=>({...a,name:e}))},error:k[2],errorMessage:"Required",onChg:()=>{let e=[...k];e[2]=!1,C(e)}}),(0,t.jsx)("div",{className:"mb-1 mt-3",children:"Barcode"}),(0,t.jsx)(n.i,{input:w.barcode,onInputChange:e=>{y(a=>({...a,barcode:e}))},error:k[0],errorMessage:"Required",onChg:()=>{let e=[...k];e[0]=!1,C(e)}}),(0,t.jsx)("div",{className:"mb-1 mt-3",children:"Kode KFA"}),(0,t.jsx)(n.i,{input:w.kfa,onInputChange:e=>{y(a=>({...a,kfa:e}))},error:k[1],errorMessage:"Required",onChg:()=>{let e=[...k];e[1]=!1,C(e)}}),(0,t.jsx)("div",{className:"mb-1 mt-3",children:"Kategori"}),(0,t.jsx)(v,{optionData:c,setValue:g,onSelected:e=>{console.log(e),null!=e?(y(a=>({...a,type:e.value})),N(a=>({...a,label:e.label,value:e.value}))):(y(e=>({...e,type:""})),N(e=>({...e,label:"",value:""})))}}),(0,t.jsx)("div",{className:"mb-5"}),(0,t.jsx)(o.J,{label:"Submit",onload:_,disabled:_,onClick:async e=>{e.preventDefault(),S(!0);let a=[...k];if(""==w.barcode?a[0]=!0:a[0]=!1,C(a),""==w.kfa?a[1]=!0:a[1]=!1,C(a),""==w.name?a[2]=!0:a[2]=!1,C(a),!a.includes(!0)){console.log(w);let e=await fetch("https://lime.farmaguru.id/productupdate",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({data:w,user:s})});if(200==e.status){let a=(await e.json()).result[0];console.log(a),O([...F].map(e=>e.id_product===a.id_product?{...e,existing_name:a.existing_name,barcode:a.barcode,id_kfa:a.id_kfa,username:a.username,updated_at:a.updated_at,category:a.category}:e)),b(!1)}}S(!1)}})]})]})})}},7208:function(e,a,s){"use strict";s.d(a,{J:function(){return r}});var t=s(7437);let r=e=>{let{label:a,onload:s,disabled:r,onClick:l}=e;return(0,t.jsx)("button",{onClick:l,className:"  w-full border border-strokedark bg-bodydark p-2 text-sm text-whiter shadow-md hover:bg-strokedark hover:text-whiter",disabled:r,children:s?(0,t.jsxs)("div",{className:"flex flex-row justify-center",children:[(0,t.jsx)("div",{className:"h-5 w-5 animate-spin rounded-full border-2 border-solid border-whiten border-t-transparent"}),(0,t.jsx)("div",{className:"pl-2 text-whiten",children:"Please wait.."})]}):a})}},4606:function(e,a,s){"use strict";s.d(a,{i:function(){return r}});var t=s(7437);let r=e=>{let{input:a,type:s,placeholder:r,error:l,errorMessage:i,onInputChange:n,onKeyChange:d,children:o,reference:c,isDisabled:u,onChg:m,isAutoFocus:x}=e;return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{value:a,type:s,ref:c,placeholder:r,disabled:u,autoFocus:x,onInput:e=>{n(e.target.value)},onKeyDown:d,onChange:m,className:"w-full border bg-white px-2  py-1 shadow-md outline-none transition ".concat(l?"border-red":"border-strokedark"," bg-transparent text-black focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary")}),l?(0,t.jsx)("span",{className:"mt-1 text-sm text-red",children:i}):(0,t.jsx)(t.Fragment,{})]})}}},function(e){e.O(0,[706,452,516,699,288,521,257,971,23,744],function(){return e(e.s=604)}),_N_E=e.O()}]);